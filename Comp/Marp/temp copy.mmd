flowchart LR
  P[現象: 製品パレット詰め工程で製品をチェックするエアハンドがワークと接触する]

  %% なぜ①
  P --> W1a[なぜ①: ワークの位置がズレた]
  P --> W1b[なぜ①: エアハンド位置がズレた]
  P --> W1c[なぜ①: エアハンドの開き量が少ない]
  P --> W1d[なぜ①: 製品が変形している]

  %% なぜ②（ワーク側）
  W1a --> W2a[なぜ②: ワークが傾いた]

  %% なぜ③（ワークが傾いた要因）
  W2a --> W3a[なぜ③: ガイドにガタがある]
  W2a --> W3b[なぜ③: スクリューにガタがある]
  W2a --> W3c[なぜ③: ガイドが低すぎる]
  W2a --> W3d[なぜ③: コンベヤが汚れている]
  W2a --> W3e[なぜ③: コンベヤが回っていない]
  W2a --> W3f[なぜ③: スクリューとガイドの間が広い]

  %% なぜ④
  W3a --> W4a[なぜ④: 取付けねじがゆるんだ]
  W3b --> W4a
  W3c --> W4b[なぜ④: 調整が誤っている]

  %% なぜ②（エアハンド位置がズレた要因）
  W1b --> H2a[なぜ②: 取付けねじがゆるんだ]
  W1b --> H2b[なぜ②: 取付けプレートが変形した]
  W1b --> W2a
  W1b --> H2c[なぜ②: ソレノイドが故障した]
  W1b --> H2d[なぜ②: エアハンドが故障した]

  %% なぜ②（開き量が少ない要因）
  W1c --> O2[なぜ②: スクリュー停止位置がズレた]
  O2 --> O3a[なぜ③: センサー位置がズレた]
  O2 --> O3b[なぜ③: 遮光板の位置がズレた]

  %% 判定
  OK((OK))
  NG{{NG}}

  W4a --> OK
  W4b --> OK
  W3d --> OK
  W3e --> OK
  O3a --> OK
  O3b --> OK
  H2a --> OK
  H2b --> OK
  H2c --> OK
  H2d --> OK
  W1d --> OK

  W3f --> NG

  %% 対策
  NG --> CM1[対策: スクリューとガイドのすき間を調整する]
  W3f --> CM2[対策メモ: 「なぜ広がったのか」の分析が足りない]
  H2c --> CM3[対策メモ: 「故障した」より「作動しなかった」など明確な表現にする]
  H2d --> CM3